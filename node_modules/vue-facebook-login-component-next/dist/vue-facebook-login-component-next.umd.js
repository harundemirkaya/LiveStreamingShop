var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__spreadValues=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e},__objRest=(e,t)=>{var o={};for(var n in e)__hasOwnProp.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))t.indexOf(n)<0&&__propIsEnum.call(e,n)&&(o[n]=e[n]);return o},__publicField=(e,t,o)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,o),o);!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).vueFacebookLoginComponent={},e.Vue)}(this,(function(e,t){"use strict";const o="facebook-jssdk",n="connected";function s(e,t="en_US"){return new Promise(((n,s)=>{window.fbAsyncInit=function(){window.FB.init(e),n(window.FB)},function(e,o,n){const r=e.getElementsByTagName(o)[0];if(e.getElementById(n))return;const l=e.createElement(o);l.id=n,l.src=`//connect.facebook.net/${t}/sdk.js`,l.onerror=e=>{!function(e){console.error(new URIError(`the script ${e.target.src} didn't load correctly.`))}(e),s(e)},r.parentNode.insertBefore(l,r)}(document,"script",o),window.setTimeout((()=>s("window.fbAsyncInit timed out, see: https://developers.facebook.com/support/bugs/")),3e3)}))}const r=class{static async _init(e,t){return r.state.isExternal?window.FB:window.FB?(r.state.isExternal=!0,window.FB):(r.state.pending||(r.state.pending=s(e,t)),r.state.pending)}static reset(){r.state.consumers=0,r.state.pending=null,r.state.isExternal=!1}static subscribe(...e){return r.state.consumers++,r._init(...e)}static async unsubscribe(){if(r.state.consumers--,!r.state.isExternal&&!r.state.consumers)return r.reset(),new Promise((e=>{const t=document.getElementById(o);t&&t.remove(),window.setTimeout(e)}))}static isConnected(e){return e===n}static isDisconnected(e){return!r.isConnected(e)}static getLoginStatus(){return new Promise((e=>window.FB.getLoginStatus(e)))}static login(e){return new Promise((t=>window.FB.login(t,e)))}static logout(){return new Promise((e=>window.FB.logout(e)))}};let l=r;__publicField(l,"state",Object.seal({isExternal:!1,pending:null,consumers:0}));var i={inheritAttrs:!1,name:"facebook-login-scope",emits:["click","input","sdk-init","login","logout"],props:{value:{type:Object,default:()=>({})},appId:{type:String,required:!0},version:{type:String,default:"v9.0"},options:{type:Object,default:()=>({cookie:!0,xfbml:!0,autoLogAppEvents:!0})},loginOptions:{type:Object,default:()=>({scope:"email"})},asyncDelay:{type:Number,default:0},sdkLocale:{type:String,default:"en_US"}},data:()=>({error:null,working:!0,connected:!1}),watch:{value({error:e,working:t,connected:o}){this.error=e,this.working=t,this.connected=o},scope(e){var t=e,{login:o,logout:n,toggleLogin:s}=t,r=__objRest(t,["login","logout","toggleLogin"]);this.$emit("input",r)}},async created(){this.async((async()=>{const{appId:e,version:t,options:o,sdkLocale:n}=this,s=await l.subscribe(__spreadValues({appId:e,version:t},o),n);if(this.error)return;this.$emit("sdk-init",{FB:s,scope:this.scope});const{status:r}=await l.getLoginStatus();l.isConnected(r)&&(this.connected=!0,this.$emit("login"))}))},beforeUnmount(){l.unsubscribe()},computed:{idle(){return!this.working&&!this.hasError},enabled(){return!this.disabled},disabled(){return this.working||this.hasError||!this.appId},disconnected(){return!this.connected},hasError(){return Boolean(this.error)},scope(){return{idle:this.idle,error:this.error,hasError:this.hasError,login:this.login,logout:this.logout,working:this.working&&!this.hasError,enabled:this.enabled,disabled:this.disabled,connected:this.connected,toggleLogin:this.toggleLogin,disconnected:this.disconnected}}},methods:{toggleLogin(){this.connected?this.logout():this.login()},async login(){return this.async((async()=>{const e=await l.login(this.loginOptions);return l.isConnected(e.status)&&(this.connected=!0,this.$emit("login",e)),e}))},async logout(){return this.async((async()=>{const e=await l.getLoginStatus();return l.isConnected(e.status)&&await l.logout(),this.connected=!1,this.$emit("logout",e),e}))},async async(e){this.working=!0;const t=await e().catch(this.catchHandler),o=new Promise((e=>setTimeout(e,this.asyncDelay))),[,n]=await Promise.all([o,t]);return this.working=!1,n},catchHandler(e){this.error=e,console.error(this.error)}},render(){var e,t;return null==(t=(e=this.$slots).default)?void 0:t.call(e,this.scope)}};const c={},a={width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},d=t.createVNode("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"},null,-1);c.render=function(e,o){return t.openBlock(),t.createBlock("svg",a,[d])};const p={},u=t.withScopeId("data-v-08412f81");t.pushScopeId("data-v-08412f81");const g={class:"v-loader"};t.popScopeId();const h=u(((e,o)=>(t.openBlock(),t.createBlock("span",g))));p.render=h,p.__scopeId="data-v-08412f81";const m={},f={width:"24",height:"24",fill:"currentColor",viewBox:"0 0 167.657 167.657",xmlns:"http://www.w3.org/2000/svg"},y=t.createVNode("g",null,[t.createVNode("path",{d:"M83.829,0.349C37.532,0.349,0,37.881,0,84.178c0,41.523,30.222,75.911,69.848,82.57v-65.081H49.626\r\n\t\tv-23.42h20.222V60.978c0-20.037,12.238-30.956,30.115-30.956c8.562,0,15.92,0.638,18.056,0.919v20.944l-12.399,0.006\r\n\t\tc-9.72,0-11.594,4.618-11.594,11.397v14.947h23.193l-3.025,23.42H94.026v65.653c41.476-5.048,73.631-40.312,73.631-83.154\r\n\t\tC167.657,37.881,130.125,0.349,83.829,0.349z"})],-1);m.render=function(e,o){return t.openBlock(),t.createBlock("svg",f,[y])};const w={emits:["click"],name:"facebook-login-button",components:{Loader:p,Logo:c,LogoAlt:m},props:{scope:{type:Object,default:()=>({})},logoClass:{type:String},logoStyle:{type:Object,default:()=>({})},textClass:{type:String},textStyle:{type:Object,default:()=>({})},loaderClass:{type:String},loaderStyle:{type:Object,default:()=>({})},transition:{type:Array,default:()=>[]},useAltLogo:{type:Boolean,default:!1}},computed:{inlineStyle(){let e=["background-color 0.25s ease-in-out"].concat(this.transition);return e=[...new Set(e)].join(", "),{transition:e}}},methods:{handleClick(){var e,t;this.$emit("click"),null==(t=(e=this.scope).toggleLogin)||t.call(e)}}},b=t.withScopeId("data-v-6c42f8fa");t.pushScopeId("data-v-6c42f8fa");const _=t.createTextVNode("Continue with Facebook"),k=t.createTextVNode("Logout"),v=t.createTextVNode("Please wait..."),S=t.createTextVNode("â›” Error");t.popScopeId();const B=b(((e,o,n,s,r,l)=>{const i=t.resolveComponent("Loader"),c=t.resolveComponent("LogoAlt"),a=t.resolveComponent("Logo");return t.openBlock(),t.createBlock("button",{class:"v-facebook-login",style:l.inlineStyle,disabled:n.scope.disabled,onClick:o[1]||(o[1]=(...e)=>l.handleClick&&l.handleClick(...e))},[t.renderSlot(e.$slots,"before",n.scope,void 0,!0),t.renderSlot(e.$slots,"loader",n.scope,(()=>[n.scope.working?(t.openBlock(),t.createBlock(i,{key:0,class:["loader",n.loaderClass],style:n.loaderStyle},null,8,["class","style"])):t.createCommentVNode("",!0)]),!0),n.scope.idle&&n.scope.disconnected?t.renderSlot(e.$slots,"logo",t.mergeProps({key:0},n.scope),(()=>[n.useAltLogo?(t.openBlock(),t.createBlock(c,{key:0,class:["logo",n.logoClass],style:n.logoStyle},null,8,["class","style"])):(t.openBlock(),t.createBlock(a,{key:1,class:["logo",n.logoClass],style:n.logoStyle},null,8,["class","style"]))]),!0):t.createCommentVNode("",!0),t.createVNode("span",{class:n.textClass,style:n.textStyle},[n.scope.idle&&n.scope.disconnected?t.renderSlot(e.$slots,"login",t.mergeProps({key:0},n.scope),(()=>[_]),!0):t.createCommentVNode("",!0),n.scope.idle&&n.scope.connected?t.renderSlot(e.$slots,"logout",t.mergeProps({key:1},n.scope),(()=>[k]),!0):t.createCommentVNode("",!0),n.scope.working?t.renderSlot(e.$slots,"working",t.mergeProps({key:2},n.scope),(()=>[v]),!0):t.createCommentVNode("",!0),n.scope.hasError?t.renderSlot(e.$slots,"error",t.mergeProps({key:3},n.scope),(()=>[S]),!0):t.createCommentVNode("",!0)],6),t.renderSlot(e.$slots,"after",n.scope,void 0,!0)],12,["disabled"])}));w.render=B,w.__scopeId="data-v-6c42f8fa";const P={name:"facebook-login",components:{Scope:i,Button:w},props:__spreadValues(__spreadValues({},i.props),w.props),computed:{model:{get(){return this.value},set(e){this.$emit("input",e)}},buttonProps(){return function(e,t){const o={};for(const n in t)Object.prototype.hasOwnProperty.call(e.props,n)&&(o[n]=t[n]);return o}(w,this.$props)}}};P.render=function(e,o,n,s,r,l){const i=t.resolveComponent("Button"),c=t.resolveComponent("scope");return t.openBlock(),t.createBlock(c,t.mergeProps(e.$props,{modelValue:l.model,"onUpdate:modelValue":o[1]||(o[1]=e=>l.model=e)}),{default:t.withCtx((o=>[t.createVNode(i,t.mergeProps(__spreadValues(__spreadValues({},l.buttonProps),e.$attrs),{scope:o}),t.createSlots({_:2},[t.renderList(e.$slots,((o,n)=>({name:n,fn:t.withCtx((o=>[t.renderSlot(e.$slots,n,o)]))})))]),1040,["scope"])])),_:1},16,["modelValue"])};const C={install(e){e.component(P.name,P)}};!function(){let e;"undefined"!=typeof window?e=window.Vue:"undefined"!=typeof global&&(e=global.Vue),e&&e.use(C)}(),e.Install=C,e.VFBLogin=P,e.VFBLoginButton=w,e.VFBLoginLoader=p,e.VFBLoginScope=i,e.default=P,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
