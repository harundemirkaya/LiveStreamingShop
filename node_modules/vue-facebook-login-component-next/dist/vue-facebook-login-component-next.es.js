var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(e,o,s)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,r=(t,r)=>{for(var i in r||(r={}))o.call(r,i)&&n(t,i,r[i]);if(e)for(var i of e(r))s.call(r,i)&&n(t,i,r[i]);return t};import{openBlock as i,createBlock as l,createVNode as c,pushScopeId as a,popScopeId as d,withScopeId as u,resolveComponent as p,renderSlot as g,createCommentVNode as h,mergeProps as y,createTextVNode as w,withCtx as f,createSlots as m,renderList as b}from"vue";const v="connected";function k(t,e="en_US"){return new Promise(((o,s)=>{window.fbAsyncInit=function(){window.FB.init(t),o(window.FB)},function(t,o,n){const r=t.getElementsByTagName(o)[0];if(t.getElementById(n))return;const i=t.createElement(o);i.id=n,i.src=`//connect.facebook.net/${e}/sdk.js`,i.onerror=t=>{!function(t){console.error(new URIError(`the script ${t.target.src} didn't load correctly.`))}(t),s(t)},r.parentNode.insertBefore(i,r)}(document,"script","facebook-jssdk"),window.setTimeout((()=>s("window.fbAsyncInit timed out, see: https://developers.facebook.com/support/bugs/")),3e3)}))}const L=class{static async _init(t,e){return L.state.isExternal?window.FB:window.FB?(L.state.isExternal=!0,window.FB):(L.state.pending||(L.state.pending=k(t,e)),L.state.pending)}static reset(){L.state.consumers=0,L.state.pending=null,L.state.isExternal=!1}static subscribe(...t){return L.state.consumers++,L._init(...t)}static async unsubscribe(){if(L.state.consumers--,!L.state.isExternal&&!L.state.consumers)return L.reset(),new Promise((t=>{const e=document.getElementById("facebook-jssdk");e&&e.remove(),window.setTimeout(t)}))}static isConnected(t){return t===v}static isDisconnected(t){return!L.isConnected(t)}static getLoginStatus(){return new Promise((t=>window.FB.getLoginStatus(t)))}static login(t){return new Promise((e=>window.FB.login(e,t)))}static logout(){return new Promise((t=>window.FB.logout(t)))}};let S=L;var B,$,C;B=S,$="state",C=Object.seal({isExternal:!1,pending:null,consumers:0}),n(B,"symbol"!=typeof $?$+"":$,C);var E={inheritAttrs:!1,name:"facebook-login-scope",emits:["click","input","sdk-init","login","logout"],props:{value:{type:Object,default:()=>({})},appId:{type:String,required:!0},version:{type:String,default:"v9.0"},options:{type:Object,default:()=>({cookie:!0,xfbml:!0,autoLogAppEvents:!0})},loginOptions:{type:Object,default:()=>({scope:"email"})},asyncDelay:{type:Number,default:0},sdkLocale:{type:String,default:"en_US"}},data:()=>({error:null,working:!0,connected:!1}),watch:{value({error:t,working:e,connected:o}){this.error=t,this.working=e,this.connected=o},scope(t){var n=t,{login:r,logout:i,toggleLogin:l}=n,c=((t,n)=>{var r={};for(var i in t)o.call(t,i)&&n.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&e)for(var i of e(t))n.indexOf(i)<0&&s.call(t,i)&&(r[i]=t[i]);return r})(n,["login","logout","toggleLogin"]);this.$emit("input",c)}},async created(){this.async((async()=>{const{appId:t,version:e,options:o,sdkLocale:s}=this,n=await S.subscribe(r({appId:t,version:e},o),s);if(this.error)return;this.$emit("sdk-init",{FB:n,scope:this.scope});const{status:i}=await S.getLoginStatus();S.isConnected(i)&&(this.connected=!0,this.$emit("login"))}))},beforeUnmount(){S.unsubscribe()},computed:{idle(){return!this.working&&!this.hasError},enabled(){return!this.disabled},disabled(){return this.working||this.hasError||!this.appId},disconnected(){return!this.connected},hasError(){return Boolean(this.error)},scope(){return{idle:this.idle,error:this.error,hasError:this.hasError,login:this.login,logout:this.logout,working:this.working&&!this.hasError,enabled:this.enabled,disabled:this.disabled,connected:this.connected,toggleLogin:this.toggleLogin,disconnected:this.disconnected}}},methods:{toggleLogin(){this.connected?this.logout():this.login()},async login(){return this.async((async()=>{const t=await S.login(this.loginOptions);return S.isConnected(t.status)&&(this.connected=!0,this.$emit("login",t)),t}))},async logout(){return this.async((async()=>{const t=await S.getLoginStatus();return S.isConnected(t.status)&&await S.logout(),this.connected=!1,this.$emit("logout",t),t}))},async async(t){this.working=!0;const e=await t().catch(this.catchHandler),o=new Promise((t=>setTimeout(t,this.asyncDelay))),[,s]=await Promise.all([o,e]);return this.working=!1,s},catchHandler(t){this.error=t,console.error(this.error)}},render(){var t,e;return null==(e=(t=this.$slots).default)?void 0:e.call(t,this.scope)}};const O={},x={width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},j=c("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"},null,-1);O.render=function(t,e){return i(),l("svg",x,[j])};const F={},P=u("data-v-08412f81");a("data-v-08412f81");const I={class:"v-loader"};d();const V=P(((t,e)=>(i(),l("span",I))));F.render=V,F.__scopeId="data-v-08412f81";const _={},A={width:"24",height:"24",fill:"currentColor",viewBox:"0 0 167.657 167.657",xmlns:"http://www.w3.org/2000/svg"},U=c("g",null,[c("path",{d:"M83.829,0.349C37.532,0.349,0,37.881,0,84.178c0,41.523,30.222,75.911,69.848,82.57v-65.081H49.626\r\n\t\tv-23.42h20.222V60.978c0-20.037,12.238-30.956,30.115-30.956c8.562,0,15.92,0.638,18.056,0.919v20.944l-12.399,0.006\r\n\t\tc-9.72,0-11.594,4.618-11.594,11.397v14.947h23.193l-3.025,23.42H94.026v65.653c41.476-5.048,73.631-40.312,73.631-83.154\r\n\t\tC167.657,37.881,130.125,0.349,83.829,0.349z"})],-1);_.render=function(t,e){return i(),l("svg",A,[U])};const H={emits:["click"],name:"facebook-login-button",components:{Loader:F,Logo:O,LogoAlt:_},props:{scope:{type:Object,default:()=>({})},logoClass:{type:String},logoStyle:{type:Object,default:()=>({})},textClass:{type:String},textStyle:{type:Object,default:()=>({})},loaderClass:{type:String},loaderStyle:{type:Object,default:()=>({})},transition:{type:Array,default:()=>[]},useAltLogo:{type:Boolean,default:!1}},computed:{inlineStyle(){let t=["background-color 0.25s ease-in-out"].concat(this.transition);return t=[...new Set(t)].join(", "),{transition:t}}},methods:{handleClick(){var t,e;this.$emit("click"),null==(e=(t=this.scope).toggleLogin)||e.call(t)}}},T=u("data-v-6c42f8fa");a("data-v-6c42f8fa");const D=w("Continue with Facebook"),N=w("Logout"),z=w("Please wait..."),M=w("â›” Error");d();const q=T(((t,e,o,s,n,r)=>{const a=p("Loader"),d=p("LogoAlt"),u=p("Logo");return i(),l("button",{class:"v-facebook-login",style:r.inlineStyle,disabled:o.scope.disabled,onClick:e[1]||(e[1]=(...t)=>r.handleClick&&r.handleClick(...t))},[g(t.$slots,"before",o.scope,void 0,!0),g(t.$slots,"loader",o.scope,(()=>[o.scope.working?(i(),l(a,{key:0,class:["loader",o.loaderClass],style:o.loaderStyle},null,8,["class","style"])):h("",!0)]),!0),o.scope.idle&&o.scope.disconnected?g(t.$slots,"logo",y({key:0},o.scope),(()=>[o.useAltLogo?(i(),l(d,{key:0,class:["logo",o.logoClass],style:o.logoStyle},null,8,["class","style"])):(i(),l(u,{key:1,class:["logo",o.logoClass],style:o.logoStyle},null,8,["class","style"]))]),!0):h("",!0),c("span",{class:o.textClass,style:o.textStyle},[o.scope.idle&&o.scope.disconnected?g(t.$slots,"login",y({key:0},o.scope),(()=>[D]),!0):h("",!0),o.scope.idle&&o.scope.connected?g(t.$slots,"logout",y({key:1},o.scope),(()=>[N]),!0):h("",!0),o.scope.working?g(t.$slots,"working",y({key:2},o.scope),(()=>[z]),!0):h("",!0),o.scope.hasError?g(t.$slots,"error",y({key:3},o.scope),(()=>[M]),!0):h("",!0)],6),g(t.$slots,"after",o.scope,void 0,!0)],12,["disabled"])}));H.render=q,H.__scopeId="data-v-6c42f8fa";const R={name:"facebook-login",components:{Scope:E,Button:H},props:r(r({},E.props),H.props),computed:{model:{get(){return this.value},set(t){this.$emit("input",t)}},buttonProps(){return function(t,e){const o={};for(const s in e)Object.prototype.hasOwnProperty.call(t.props,s)&&(o[s]=e[s]);return o}(H,this.$props)}}};R.render=function(t,e,o,s,n,a){const d=p("Button"),u=p("scope");return i(),l(u,y(t.$props,{modelValue:a.model,"onUpdate:modelValue":e[1]||(e[1]=t=>a.model=t)}),{default:f((e=>[c(d,y(r(r({},a.buttonProps),t.$attrs),{scope:e}),m({_:2},[b(t.$slots,((e,o)=>({name:o,fn:f((e=>[g(t.$slots,o,e)]))})))]),1040,["scope"])])),_:1},16,["modelValue"])};const G={install(t){t.component(R.name,R)}};!function(){let t;"undefined"!=typeof window?t=window.Vue:"undefined"!=typeof global&&(t=global.Vue),t&&t.use(G)}();export default R;export{G as Install,R as VFBLogin,H as VFBLoginButton,F as VFBLoginLoader,E as VFBLoginScope};
